[H[2J[3JInstalling the bochs software using apt-get ...
Press Enter to continue...
Reading package lists...
Building dependency tree...
Reading state information...
bochs is already the newest version (2.7+dfsg-2).
bochs-x is already the newest version (2.7+dfsg-2).
bochsbios is already the newest version (2.7+dfsg-2).
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
Press Enter to continue...
[H[2J[3JInstalling the nasm assembler software ...
Press Enter to continue...
Reading package lists...
Building dependency tree...
Reading state information...
nasm is already the newest version (2.15.05-1).
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
Press Enter to continue...
[H[2J[3JBuilding the kernel, library, samples and preparing a
bootable floppy image and moving that to the bochsimg folder ...
Press Enter to continue...
make -C ../imgcopy
make[1]: Entering directory '/home/kali/Documents/os-lab/pack.6/imgcopy'
gcc -Wall -Wstrict-prototypes -fomit-frame-pointer -fno-strict-aliasing  -c -o main.o main.c
gcc -Wall -Wstrict-prototypes -fomit-frame-pointer -fno-strict-aliasing  -c -o buffers.o buffers.c
gcc -Wall -Wstrict-prototypes -fomit-frame-pointer -fno-strict-aliasing  -c -o datetime.o datetime.c
gcc -Wall -Wstrict-prototypes -fomit-frame-pointer -fno-strict-aliasing  -c -o fs.o fs.c
gcc -Wall -Wstrict-prototypes -fomit-frame-pointer -fno-strict-aliasing  -c -o fscalls.o fscalls.c
gcc -o cpfile main.o buffers.o datetime.o fs.o fscalls.o 
cp	cpfile	../base/
make[1]: Leaving directory '/home/kali/Documents/os-lab/pack.6/imgcopy'
make -C ../lib 
make[1]: Entering directory '/home/kali/Documents/os-lab/pack.6/lib'
gcc -I ../include -Wall -Wstrict-prototypes -m32 -fomit-frame-pointer -fno-strict-aliasing -fno-builtin -ffreestanding -nostdlib -nostdinc  -c -o datetime.o datetime.c
gcc -I ../include -Wall -Wstrict-prototypes -m32 -fomit-frame-pointer -fno-strict-aliasing -fno-builtin -ffreestanding -nostdlib -nostdinc  -c -o drand48.o drand48.c
gcc -I ../include -Wall -Wstrict-prototypes -m32 -fomit-frame-pointer -fno-strict-aliasing -fno-builtin -ffreestanding -nostdlib -nostdinc  -c -o getopt.o getopt.c
gcc -I ../include -Wall -Wstrict-prototypes -m32 -fomit-frame-pointer -fno-strict-aliasing -fno-builtin -ffreestanding -nostdlib -nostdinc  -c -o input.o input.c
nasm -f elf -o klib.o klib.asm
gcc -I ../include -Wall -Wstrict-prototypes -m32 -fomit-frame-pointer -fno-strict-aliasing -fno-builtin -ffreestanding -nostdlib -nostdinc  -c -o library.o library.c
gcc -I ../include -Wall -Wstrict-prototypes -m32 -fomit-frame-pointer -fno-strict-aliasing -fno-builtin -ffreestanding -nostdlib -nostdinc  -c -o malloc.o malloc.c
gcc -I ../include -Wall -Wstrict-prototypes -m32 -fomit-frame-pointer -fno-strict-aliasing -fno-builtin -ffreestanding -nostdlib -nostdinc  -c -o scanf1.o scanf1.c
gcc -I ../include -Wall -Wstrict-prototypes -m32 -fomit-frame-pointer -fno-strict-aliasing -fno-builtin -ffreestanding -nostdlib -nostdinc  -c -o string.o string.c
gcc -I ../include -Wall -Wstrict-prototypes -m32 -fomit-frame-pointer -fno-strict-aliasing -fno-builtin -ffreestanding -nostdlib -nostdinc  -c -o strtod.o strtod.c
gcc -I ../include -Wall -Wstrict-prototypes -m32 -fomit-frame-pointer -fno-strict-aliasing -fno-builtin -ffreestanding -nostdlib -nostdinc  -c -o syscallwrap.o syscallwrap.c
nasm -f elf -o syscallib.o syscallib.asm
gcc -I ../include -Wall -Wstrict-prototypes -m32 -fomit-frame-pointer -fno-strict-aliasing -fno-builtin -ffreestanding -nostdlib -nostdinc  -c -o vsprintf.o vsprintf.c
nasm -f elf -o pow.o pow.asm
gcc -I ../include -Wall -Wstrict-prototypes -m32 -fomit-frame-pointer -fno-strict-aliasing -fno-builtin -ffreestanding -nostdlib -nostdinc  -c -o mathfunc.o mathfunc.c
gcc -I ../include -Wall -Wstrict-prototypes -m32 -fomit-frame-pointer -fno-strict-aliasing -fno-builtin -ffreestanding -nostdlib -nostdinc  -c -o strtol.o strtol.c
ar cr lib.a datetime.o drand48.o getopt.o input.o klib.o library.o malloc.o scanf1.o string.o strtod.o syscallwrap.o syscallib.o vsprintf.o pow.o mathfunc.o strtol.o 
make[1]: Leaving directory '/home/kali/Documents/os-lab/pack.6/lib'
make -C ../samples
make[1]: Entering directory '/home/kali/Documents/os-lab/pack.6/samples'
gcc -I ../include -O4 -Wall -Wstrict-prototypes -m32 -c -fomit-frame-pointer -fno-strict-aliasing -fno-builtin -ffreestanding -nostdlib -nostdinc seive.c
ld -T userproc.lds -melf_i386 -Map seive.map -o seive seive.o ../lib/lib.a
gcc -I ../include -O4 -Wall -Wstrict-prototypes -m32 -c -fomit-frame-pointer -fno-strict-aliasing -fno-builtin -ffreestanding -nostdlib -nostdinc reduct.c
ld -T userproc.lds -melf_i386 -Map reduct.map -o reduct reduct.o ../lib/lib.a
gcc -I ../include -O4 -Wall -Wstrict-prototypes -m32 -c -fomit-frame-pointer -fno-strict-aliasing -fno-builtin -ffreestanding -nostdlib -nostdinc merge.c
ld -T userproc.lds -melf_i386 -Map merge.map -o merge merge.o ../lib/lib.a
gcc -I ../include -O4 -Wall -Wstrict-prototypes -m32 -c -fomit-frame-pointer -fno-strict-aliasing -fno-builtin -ffreestanding -nostdlib -nostdinc quiksort.c
ld -T userproc.lds -melf_i386 -Map quiksort.map -o quiksort quiksort.o ../lib/lib.a
gcc -I ../include -O4 -Wall -Wstrict-prototypes -m32 -c -fomit-frame-pointer -fno-strict-aliasing -fno-builtin -ffreestanding -nostdlib -nostdinc tsp.c
ld -T userproc.lds -melf_i386 -Map tsp.map -o tsp tsp.o ../lib/lib.a
gcc -I ../include -O4 -Wall -Wstrict-prototypes -m32 -c -fomit-frame-pointer -fno-strict-aliasing -fno-builtin -ffreestanding -nostdlib -nostdinc tsp2.c
ld -T userproc.lds -melf_i386 -Map tsp2.map -o tsp2 tsp2.o ../lib/lib.a
gcc -I ../include -O4 -Wall -Wstrict-prototypes -m32 -c -fomit-frame-pointer -fno-strict-aliasing -fno-builtin -ffreestanding -nostdlib -nostdinc matmult.c
ld -T userproc.lds -melf_i386 -Map matmult.map -o matmult matmult.o ../lib/lib.a
cc -I ../include -O4 -Wall -Wstrict-prototypes -m32 -c -fomit-frame-pointer -fno-strict-aliasing -fno-builtin -ffreestanding -nostdlib -nostdinc   -c -o seive2.o seive2.c
ld -T userproc.lds -melf_i386 -Map seive2.map -o seive2 seive2.o ../lib/lib.a
gcc -I ../include -O4 -Wall -Wstrict-prototypes -m32 -c -fomit-frame-pointer -fno-strict-aliasing -fno-builtin -ffreestanding -nostdlib -nostdinc shell.c
ld -T userproc.lds -melf_i386 -Map shell.map -o shell shell.o ../lib/lib.a
make[1]: Leaving directory '/home/kali/Documents/os-lab/pack.6/samples'
nasm -f elf -o initboot.o initboot.asm
nasm -f elf -o intr_entry.o intr_entry.asm
gcc -I ../include -O4 -Wall -Wstrict-prototypes -m32 -fomit-frame-pointer -fno-strict-aliasing -fno-builtin -ffreestanding -fno-pic -nostdlib -nostdinc -c -o timer.o timer.c
gcc -I ../include -O4 -Wall -Wstrict-prototypes -m32 -fomit-frame-pointer -fno-strict-aliasing -fno-builtin -ffreestanding -fno-pic -nostdlib -nostdinc -c -o kbd.o kbd.c
gcc -I ../include -O4 -Wall -Wstrict-prototypes -m32 -fomit-frame-pointer -fno-strict-aliasing -fno-builtin -ffreestanding -fno-pic -nostdlib -nostdinc -O3 -c -o string.o string.c
gcc -I ../include -O4 -Wall -Wstrict-prototypes -m32 -fomit-frame-pointer -fno-strict-aliasing -fno-builtin -ffreestanding -fno-pic -nostdlib -nostdinc -c -o vdisplay.o vdisplay.c
nasm -f elf -o klib.o klib.asm
gcc -I ../include -O4 -Wall -Wstrict-prototypes -m32 -fomit-frame-pointer -fno-strict-aliasing -fno-builtin -ffreestanding -fno-pic -nostdlib -nostdinc -c -o fs.o fs.c
gcc -I ../include -O4 -Wall -Wstrict-prototypes -m32 -fomit-frame-pointer -fno-strict-aliasing -fno-builtin -ffreestanding -fno-pic -nostdlib -nostdinc -c -o fat12.o fat12.c
gcc -I ../include -O4 -Wall -Wstrict-prototypes -m32 -fomit-frame-pointer -fno-strict-aliasing -fno-builtin -ffreestanding -fno-pic -nostdlib -nostdinc -c -o lock.o lock.c
gcc -I ../include -Wall -Wstrict-prototypes -m32 -fomit-frame-pointer -fno-strict-aliasing -fno-builtin -ffreestanding -fno-pic -nostdlib -nostdinc  -c -o procintr.o procintr.c
gcc -I ../include -O4 -Wall -Wstrict-prototypes -m32 -fomit-frame-pointer -fno-strict-aliasing -fno-builtin -ffreestanding -fno-pic -nostdlib -nostdinc -c -o syscalls.o syscalls.c
gcc -I ../include -Wall -Wstrict-prototypes -m32 -fomit-frame-pointer -fno-strict-aliasing -fno-builtin -ffreestanding -fno-pic -nostdlib -nostdinc  -c -o main.o main.c
gcc -I ../include -O4 -Wall -Wstrict-prototypes -m32 -fomit-frame-pointer -fno-strict-aliasing -fno-builtin -ffreestanding -fno-pic -nostdlib -nostdinc -fno-builtin-bzero -fno-builtin-strncmp -c -o process.o process.c
gcc -I ../include -O4 -Wall -Wstrict-prototypes -m32 -fomit-frame-pointer -fno-strict-aliasing -fno-builtin -ffreestanding -fno-pic -nostdlib -nostdinc -c -o fdc.o fdc.c
gcc -I ../include -O4 -Wall -Wstrict-prototypes -m32 -fomit-frame-pointer -fno-strict-aliasing -fno-builtin -ffreestanding -fno-pic -nostdlib -nostdinc -c -o nic.o nic.c
gcc -I ../include -O4 -Wall -Wstrict-prototypes -m32 -fomit-frame-pointer -fno-strict-aliasing -fno-builtin -ffreestanding -fno-pic -nostdlib -nostdinc -c -o vmmap.o vmmap.c
gcc -I ../include -O4 -Wall -Wstrict-prototypes -m32 -fomit-frame-pointer -fno-strict-aliasing -fno-builtin -ffreestanding -fno-pic -nostdlib -nostdinc -c -o semaphore.o semaphore.c
gcc -I ../include -O4 -Wall -Wstrict-prototypes -m32 -fomit-frame-pointer -fno-strict-aliasing -fno-builtin -ffreestanding -fno-pic -nostdlib -nostdinc -c -o socket.o socket.c
gcc -I ../include -O4 -Wall -Wstrict-prototypes -m32 -fomit-frame-pointer -fno-strict-aliasing -fno-builtin -ffreestanding -fno-pic -nostdlib -nostdinc -fno-builtin-bzero -fno-builtin-strncmp -c -o pthread.o pthread.c
ld -T mkernel.lds -melf_i386 -e _main -o kernel -Map mkern.map --cref  intr_entry.o timer.o kbd.o string.o \
vdisplay.o klib.o fs.o fat12.o lock.o procintr.o syscalls.o main.o \
process.o fdc.o nic.o vmmap.o semaphore.o socket.o pthread.o
sort -k 17 mkern.map > mkern.sort
nasm -f bin -o pmswitch.o pmswitch.asm
dd if=pmswitch.o of=pmswitch1k bs=1024 conv=sync
nasm -f bin -o sysdata.o sysdata.asm
dd if=sysdata.o of=sysdata1k bs=1024 conv=sync
cat sysdata1k pmswitch1k kernel > IMAGE
#ld -T userproc.lds -no-pie -Map shell.map -o shell shell.o ../lib/lib.a
cp fimage.orig fimage
./bootcp
./cpfile IMAGE IMAGE
./cpfile ../samples/shell shell
./cpfile ../samples/quiksort quiksort
./cpfile ../samples/reduct reduct
./cpfile ../samples/matmult matmult
./cpfile ../samples/seive seive
./cpfile ../samples/seive2 seive2
./cpfile ../samples/merge smerg
./cpfile ../samples/tsp tsp
./cpfile ../samples/tsp2 tsp2
mv fimage ../bochsimg
If every thing is ok then fimage (floppy bootable image) is copied into
bochsimg folder. Use the following commands to start the emulator

		cd bochsimg
		bochs -qf bochsrc.txt &


	Thanks! Experiment and enjoy ...

